<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Optimization · Planar.jl</title><meta name="title" content="Optimization · Planar.jl"/><meta property="og:title" content="Optimization · Planar.jl"/><meta property="twitter:title" content="Optimization · Planar.jl"/><meta name="description" content="Documentation for Planar.jl."/><meta property="og:description" content="Documentation for Planar.jl."/><meta property="twitter:description" content="Documentation for Planar.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../presentation/"><img src="../../assets/logo.png" alt="Planar.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../presentation/">Overview</a></li><li><a class="tocitem" href="../../">What is Planar?</a></li></ul></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting-started/">Overview</a></li><li><a class="tocitem" href="../../getting-started/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../getting-started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting-started/first-strategy/">First Strategy</a></li></ul></li><li><span class="tocitem">User Guides</span><ul><li><a class="tocitem" href="../../strategy/">Strategy Development</a></li><li><a class="tocitem" href="../../data/">Data Management</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Execution Modes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../engine/engine/">Overview</a></li><li><a class="tocitem" href="../../engine/backtesting/">Backtesting</a></li><li><a class="tocitem" href="../../engine/paper/">Paper Trading</a></li><li><a class="tocitem" href="../../engine/live/">Live Trading</a></li><li><a class="tocitem" href="../../engine/mode-comparison/">Mode Comparison</a></li><li><a class="tocitem" href="../../engine/features/">Features</a></li></ul></li><li><a class="tocitem" href="../../optimization/">Optimization</a></li><li><a class="tocitem" href="../../plotting/">Visualization</a></li><li><a class="tocitem" href="../../metrics/">Performance Analysis</a></li></ul></li><li><span class="tocitem">Data Sources</span><ul><li><a class="tocitem" href="../../exchanges/">Exchanges</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Watchers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../watchers/watchers/">Interface</a></li><li><input class="collapse-toggle" id="menuitem-4-2-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2-2"><span class="docs-label">APIs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li></ul></li></ul></li><li><span class="tocitem">Advanced Topics</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">Customization &amp; Extensions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../customizations/customizations/">Overview</a></li><li><a class="tocitem" href="../../customizations/orders/">Custom Orders</a></li><li><a class="tocitem" href="../../customizations/backtest/">Backtester Customization</a></li><li><a class="tocitem" href="../../customizations/exchanges/">Exchange Extensions</a></li></ul></li><li><a class="tocitem" href="../../types/">Type System</a></li><li><a class="tocitem" href="../../devdocs/">Developer Documentation</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../documentation-index/">Documentation Index</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox" checked/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">API Documentation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collections/">Collections</a></li><li><a class="tocitem" href="../data/">Data</a></li><li><a class="tocitem" href="../ccxt/">CCXT</a></li><li><a class="tocitem" href="../dfutils/">DataFrame Utils</a></li><li><a class="tocitem" href="../executors/">Executors</a></li><li><a class="tocitem" href="../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../fetch/">Fetch</a></li><li><a class="tocitem" href="../engine/">Engine</a></li><li><a class="tocitem" href="../instances/">Instances</a></li><li><a class="tocitem" href="../instruments/">Instruments</a></li><li><a class="tocitem" href="../misc/">Miscellaneous</a></li><li class="is-active"><a class="tocitem" href>Optimization</a><ul class="internal"><li><a class="tocitem" href="#See-Also"><span>See Also</span></a></li></ul></li><li><a class="tocitem" href="../pbar/">Progress Bars</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../prices/">Prices</a></li><li><a class="tocitem" href="../processing/">Processing</a></li><li><a class="tocitem" href="../python/">Python Integration</a></li><li><a class="tocitem" href="../metrics/">Metrics</a></li><li><a class="tocitem" href="../strategies/">Strategies</a></li><li><a class="tocitem" href="../strategytools/">Strategy Tools</a></li><li><a class="tocitem" href="../strategystats/">Strategy Stats</a></li></ul></li><li><a class="tocitem" href="../../config/">Configuration</a></li><li><a class="tocitem" href="../../disambiguation/">Glossary</a></li></ul></li><li><span class="tocitem">Support</span><ul><li><a class="tocitem" href="../../troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../contacts/">Community</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">API Documentation</a></li><li class="is-active"><a href>Optimization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Optimization</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/BubbleParticles/Planar.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/BubbleParticles/Planar.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Optimization"><a class="docs-heading-anchor" href="#Optimization">Optimization</a><a id="Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.Optim" href="#Optim.Optim"><code>Optim.Optim</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Optimization</code></pre><p>The <code>Optimization</code> module provides tools and abstractions for defining, configuring, and executing optimization routines within the Planar.jl framework. It is designed to support a variety of optimization strategies, including parameter tuning, strategy selection, and performance evaluation for trading systems and related applications. The module integrates seamlessly with other Planar.jl components, ensuring type safety, extensibility, and efficient execution.</p><p>Main features:</p><ul><li>Flexible optimization workflows for trading strategies and system parameters</li><li>Integration with Planar.jl&#39;s data, strategy, and execution layers</li><li>Support for precompilation and dynamic loading</li><li>Extensible design for custom optimization algorithms</li></ul><p><strong>Comparison of Search Methods</strong></p><table><tr><th style="text-align: right">Function</th><th style="text-align: right">Data Segmentation</th><th style="text-align: right">Parameter Selection</th><th style="text-align: right">Main Use Case</th></tr><tr><td style="text-align: right">progsearch</td><td style="text-align: right">Segments by offset</td><td style="text-align: right">Filters after each round</td><td style="text-align: right">Robustness across data segments</td></tr><tr><td style="text-align: right">broadsearch</td><td style="text-align: right">Slices by fixed size</td><td style="text-align: right">Filters after each slice</td><td style="text-align: right">Adapting to changing regimes over time</td></tr><tr><td style="text-align: right">slidetest</td><td style="text-align: right">Slides by timeframe</td><td style="text-align: right">No parameter search</td><td style="text-align: right">Granular, rolling/walk-forward backtesting</td></tr></table><ul><li><code>progsearch</code>: Progressive grid search with filtering and offsetting for robustness.</li><li><code>broadsearch</code>: Sequential grid search over contiguous slices, filtering at each step.</li><li><code>slidetest</code>: Sliding window backtest, moving by the smallest timeframe increment.</li></ul><p><strong>User-facing Optimization/Search Functions</strong></p><ul><li><code>gridsearch(s::Strategy; ...)</code>: Grid search over parameter combinations for a strategy.</li><li><code>progsearch(s::Strategy; ...)</code>: Progressive search, running multiple grid searches with filtering and resampling.</li><li><code>slidetest(s::Strategy; ...)</code>: Slides a window over the backtesting period, running optimizations at each step.</li><li><code>broadsearch(s::Strategy; ...)</code>: Performs a broad search by slicing the context and optimizing in each slice.</li><li><code>optimize(s::Strategy; ...)</code>: Black-box optimization using the Optimization.jl framework (supports global optimization algorithms).</li><li><code>boptimize!(s::Strategy; ...)</code>: Bayesian optimization using Gaussian Processes (requires BayesExt and BayesianOptimization.jl).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.DEFAULT_OBJ" href="#Optim.DEFAULT_OBJ"><code>Optim.DEFAULT_OBJ</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A constant representing the default objective value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.RUNNING" href="#Optim.RUNNING"><code>Optim.RUNNING</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A constant instance of <code>OptRunning</code> initialized with <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.disabled_methods" href="#Optim.disabled_methods"><code>Optim.disabled_methods</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A set of optimization methods that are disabled and not used with the <code>BlackBoxOptim</code> package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.BestColumn" href="#Optim.BestColumn"><code>Optim.BestColumn</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A column in the progress bar representing the best optimization result.</p><ul><li><p><code>job</code></p></li><li><p><code>segments</code></p></li><li><p><code>measure</code></p></li><li><p><code>best</code></p></li></ul><p>This struct represents a column in the progress bar that displays the best result of the optimization job. It contains a <code>ProgressJob</code>, a vector of <code>Segment</code> objects, a <code>Measure</code> object, and a reference to the best result. The constructor creates a <code>Segment</code> with a string representation of the best result and sets the width of the measure to 15.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.ContextSpace" href="#Optim.ContextSpace"><code>Optim.ContextSpace</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A named tuple representing the context and space in the optimization process.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.ETAColumn" href="#Optim.ETAColumn"><code>Optim.ETAColumn</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A column in the progress bar representing the estimated time remaining.</p><ul><li><p><code>job</code></p></li><li><p><code>segments</code></p></li><li><p><code>measure</code></p></li><li><p><code>start_time</code></p></li><li><p><code>last_update</code></p></li><li><p><code>completed</code></p></li><li><p><code>total</code></p></li></ul><p>This struct represents a column in the progress bar that displays the estimated time remaining for the optimization job. It contains a <code>ProgressJob</code>, a vector of <code>Segment</code> objects, a <code>Measure</code> object, and references to track progress timing. The constructor creates a <code>Segment</code> with a string representation of the ETA and sets the width of the measure to 15.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.OptRunning" href="#Optim.OptRunning"><code>Optim.OptRunning</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A mutable structure representing the running state of an optimization process.</p><ul><li><code>value</code></li></ul><p>This structure contains a single field <code>value</code> which is an atomic boolean. It is used to indicate whether the optimization process is currently running or not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.OptSession" href="#Optim.OptSession"><code>Optim.OptSession</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A structure representing an optimization session.</p><ul><li><p><code>s</code></p></li><li><p><code>ctx</code></p></li><li><p><code>params</code></p></li><li><p><code>attrs</code></p></li><li><p><code>results</code></p></li><li><p><code>best</code></p></li><li><p><code>lock</code></p></li><li><p><code>s_clones</code></p></li><li><p><code>ctx_clones</code></p></li></ul><p>This structure stores all the evaluated parameters combinations during an optimization session. It contains fields for the strategy, context, parameters, attributes, results, best result, lock, and clones of the strategy and context for each thread. The constructor for <code>OptSession</code> also takes an offset and number of threads as optional parameters, with default values of 0 and the number of available threads, respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.ParamsColumn" href="#Optim.ParamsColumn"><code>Optim.ParamsColumn</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A column in the progress bar representing parameters.</p><ul><li><p><code>job</code></p></li><li><p><code>segments</code></p></li><li><p><code>measure</code></p></li><li><p><code>params</code></p></li></ul><p>This struct represents a column in the progress bar that displays the parameters of the optimization job. It contains a <code>ProgressJob</code>, a vector of <code>Segment</code> objects, a <code>Measure</code> object, and a reference to the parameters. The constructor creates a <code>Segment</code> with a string representation of the parameters and sets the width of the measure to 15.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Misc.call!-Tuple{Strategy, Any, Executors.OptRun}" href="#Misc.call!-Tuple{Strategy, Any, Executors.OptRun}"><code>Misc.call!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Applies parameters to strategy before backtest</p><pre><code class="language-julia hljs">call!(_::Strategy, params, _::Executors.OptRun)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Misc.call!-Tuple{Strategy, Executors.OptMinimize}" href="#Misc.call!-Tuple{Strategy, Executors.OptMinimize}"><code>Misc.call!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Indicates if the optimization is a minimization problem.</p><pre><code class="language-julia hljs">call!(_::Strategy, _::Executors.OptMinimize) -&gt; Bool
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Misc.call!-Tuple{Strategy, Executors.OptSetup}" href="#Misc.call!-Tuple{Strategy, Executors.OptSetup}"><code>Misc.call!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns <code>Optim.ContextSpace</code> for backtesting</p><pre><code class="language-julia hljs">call!(_::Strategy, _::Executors.OptSetup)
</code></pre><p>The <code>ctx</code> field (<code>Executors.Context</code>) specifies the backtest time period, while <code>bounds</code> is a tuple of (lower, upper) bounds for the optimization parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim._get_color_and_update_best-Tuple{Any, Any, Any}" href="#Optim._get_color_and_update_best-Tuple{Any, Any, Any}"><code>Optim._get_color_and_update_best</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Multi-threaded optimization function.</p><pre><code class="language-julia hljs">_get_color_and_update_best(
    sess,
    obj,
    pnl
) -&gt; Tuple{String, String}
</code></pre><p>The function takes four arguments: <code>splits</code>, <code>backtest_func</code>, <code>median_func</code>, and <code>obj_type</code>. <code>splits</code> is the number of splits for the optimization process, <code>backtest_func</code> is the backtest function, <code>median_func</code> is the function to calculate the median, and <code>obj_type</code> is the type of the objective. The function returns a function that performs a multi-threaded optimization for a given set of parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim._single_opt_func-Tuple{Any, Any, Any, Any, Vararg{Any}}" href="#Optim._single_opt_func-Tuple{Any, Any, Any, Any, Vararg{Any}}"><code>Optim._single_opt_func</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Single-threaded optimization function.</p><pre><code class="language-julia hljs">_single_opt_func(
    sess,
    splits,
    backtest_func,
    median_func,
    args...
) -&gt; Optim.var&quot;#single_backtest_func#_single_opt_func##0&quot;
</code></pre><p>The function takes four arguments: <code>splits</code>, <code>backtest_func</code>, <code>median_func</code>, and <code>obj_type</code>. <code>splits</code> is the number of splits for the optimization process, <code>backtest_func</code> is the backtest function, <code>median_func</code> is the function to calculate the median, and <code>obj_type</code> is the type of the objective. The function returns a function that performs a single-threaded optimization for a given set of parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim._spacedims-Tuple{Any}" href="#Optim._spacedims-Tuple{Any}"><code>Optim._spacedims</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the dimension of the search space.</p><pre><code class="language-julia hljs">_spacedims(params) -&gt; Any
</code></pre><p>This function takes the parameters as input, which should include lower and upper bounds arrays as the second and third elements. It asserts that the lengths of these arrays are equal and returns their common length, which represents the dimension of the search space.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim._tostring-Tuple{Any, Any}" href="#Optim._tostring-Tuple{Any, Any}"><code>Optim._tostring</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Converts the provided parameters into a string representation.</p><pre><code class="language-julia hljs">_tostring(prefix, params) -&gt; String
</code></pre><p>The function takes a prefix and a set of parameters as input. It joins the prefix and the parameters into a single string, with each parameter converted to a compact number representation. The resulting string is then truncated to fit the display size.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.agg-Tuple{DataFrames.DataFrame}" href="#Optim.agg-Tuple{DataFrames.DataFrame}"><code>Optim.agg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">agg(df::DataFrame; reduce_func=mean, agg_func=median)</code></pre><p>Aggregates the DataFrame <code>df</code> by grouping on all columns except <code>:obj</code>, <code>:cash</code>, <code>:pnl</code>, and <code>:trades</code>. Applies <code>reduce_func</code> to each group, then <code>agg_func</code> to the reduced results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.agg-Tuple{OptSession}" href="#Optim.agg-Tuple{OptSession}"><code>Optim.agg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Groups session results by repeat and aggregates metrics columns.</p><pre><code class="language-julia hljs">agg(
    sess::OptSession;
    sort_by,
    filter_zero_trades
) -&gt; DataFrames.DataFrame
</code></pre><ul><li><code>sess</code>: The optimization session containing results</li><li><code>sort_by</code>: Column to sort by (default: :pnl_avg)</li><li><code>filter_zero_trades</code>: Filter out rows with 0 trades (default: true)</li></ul><p>Returns a DataFrame with one row per unique parameter combination, containing:</p><ul><li>Parameter columns (from first row of each group)</li><li>Aggregated metrics: average, median, min, max for obj, cash, pnl, trades</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.apply_precision-Tuple{Any, Strategy}" href="#Optim.apply_precision-Tuple{Any, Strategy}"><code>Optim.apply_precision</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Applies precision constraints to optimization parameters.</p><pre><code class="language-julia hljs">apply_precision(u, s::Strategy) -&gt; Any
</code></pre><p>This function rounds parameters according to the precision specification stored in the strategy&#39;s attributes. If no precision is specified, returns the parameters unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.bbo_fitness_scheme-Tuple{Strategy, Any}" href="#Optim.bbo_fitness_scheme-Tuple{Strategy, Any}"><code>Optim.bbo_fitness_scheme</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Determines the fitness scheme for a given strategy and number of objectives.</p><pre><code class="language-julia hljs">bbo_fitness_scheme(
    s::Strategy,
    n_obj
) -&gt; BlackBoxOptim.ParetoFitnessScheme
</code></pre><p>This function takes a strategy and a number of objectives as input. It checks if the strategy has a custom weights function defined in its attributes. If it does, this function is used as the aggregator in the ParetoFitnessScheme. If not, a default ParetoFitnessScheme is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.bbomethods" href="#Optim.bbomethods"><code>Optim.bbomethods</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns a set of optimization methods supported by BlackBoxOptim.</p><pre><code class="language-julia hljs">bbomethods() -&gt; Set{Symbol}
bbomethods(multi) -&gt; Set
</code></pre><p>This function filters the methods based on the <code>multi</code> parameter and excludes the methods listed in <code>disabled_methods</code>. If <code>multi</code> is <code>true</code>, it returns multi-objective methods, otherwise it returns single-objective methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.broadsearch-Tuple{Strategy}" href="#Optim.broadsearch-Tuple{Strategy}"><code>Optim.broadsearch</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Performs a broad search optimization that progressively moves through the context range.</p><pre><code class="language-julia hljs">broadsearch(s::Strategy; slice_size, sort_by, kwargs...)
</code></pre><ul><li><code>slice_size</code>: Size of each slice in terms of strategy timeframe periods. If a float between 0 and 1, it is interpreted as a fraction of the total steps (default: 0.2, i.e., 1/5 of the total steps)</li><li><code>sort_by</code>: Column to sort results by (:pnl or :obj, default: :pnl)</li></ul><p>The search starts with the first slice of the context and at each iteration:</p><ol><li>Moves to the next contiguous slice</li><li>Filters parameters based on filter_func</li><li>Continues until reaching the end of the context</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.ctxfromstrat-Tuple{Any}" href="#Optim.ctxfromstrat-Tuple{Any}"><code>Optim.ctxfromstrat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Extracts the context, parameters, and bounds from a given strategy.</p><pre><code class="language-julia hljs">ctxfromstrat(s)
</code></pre><p>This function takes a strategy as input and returns the context, parameters, and bounds associated with that strategy. The bounds can be specified as:</p><ul><li>A tuple of (lower, upper) bounds</li><li>A function that returns bounds</li><li>A NamedTuple with :bounds and optional :precision and :categorical fields</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.ctxsteps-Tuple{Any, Any, Any}" href="#Optim.ctxsteps-Tuple{Any, Any, Any}"><code>Optim.ctxsteps</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculates the small and big steps for the optimization context.</p><pre><code class="language-julia hljs">ctxsteps(
    ctx,
    splits,
    wp
) -&gt; NamedTuple{(:small_step, :big_step), &lt;:Tuple{Any, Any}}
</code></pre><p>The function takes two arguments: <code>ctx</code> and <code>splits</code>. <code>ctx</code> is the optimization context and <code>splits</code> is the number of splits for the optimization process. The function returns a named tuple with <code>small_step</code> and <code>big_step</code> which represent the step size for the optimization process.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.define_backtest_func-Tuple{Any, Any, Any}" href="#Optim.define_backtest_func-Tuple{Any, Any, Any}"><code>Optim.define_backtest_func</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Defines the backtest function for an optimization session.</p><pre><code class="language-julia hljs">define_backtest_func(
    sess,
    small_step,
    big_step;
    verbose
) -&gt; Optim.var&quot;#opt_backtest_func#38&quot;{Bool}
</code></pre><p>The function takes three arguments: <code>sess</code>, <code>small_step</code>, and <code>big_step</code>. <code>sess</code> is the optimization session, <code>small_step</code> is the small step size for the optimization process, and <code>big_step</code> is the big step size for the optimization process. The function returns a function that performs a backtest for a given set of parameters and a given iteration number.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.define_median_func-Tuple{Any}" href="#Optim.define_median_func-Tuple{Any}"><code>Optim.define_median_func</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Defines the median function for multi-objective mode.</p><pre><code class="language-julia hljs">define_median_func(
    splits
) -&gt; Union{Optim.var&quot;#median_tuple#define_median_func##0&quot;, typeof(Statistics.median)}
</code></pre><p>The function takes a boolean argument <code>ismulti</code> which indicates if the optimization is multi-objective. If <code>ismulti</code> is <code>true</code>, the function returns a function that calculates the median over all the repeated iterations. Otherwise, it returns a function that calculates the median of a given array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.define_opt_func-Tuple{Strategy}" href="#Optim.define_opt_func-Tuple{Strategy}"><code>Optim.define_opt_func</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Defines the optimization function for a given strategy.</p><pre><code class="language-julia hljs">define_opt_func(
    s::Strategy;
    backtest_func,
    split_test,
    splits,
    n_jobs,
    obj_type,
    isthreaded,
    sess
)
</code></pre><p>The function takes several arguments: <code>s</code>, <code>backtest_func</code>, <code>ismulti</code>, <code>splits</code>, <code>obj_type</code>, and <code>isthreaded</code>. <code>s</code> is the strategy, <code>backtest_func</code> is the backtest function, <code>ismulti</code> indicates if the optimization is multi-objective, <code>splits</code> is the number of splits for the optimization process, <code>obj_type</code> is the type of the objective, and <code>isthreaded</code> indicates if the optimization is threaded. The function returns the appropriate optimization function based on these parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.delete_sessions!-Tuple{String}" href="#Optim.delete_sessions!-Tuple{String}"><code>Optim.delete_sessions!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Clears optimization sessions of a strategy.</p><pre><code class="language-julia hljs">delete_sessions!(s_name::String; keep_by, zi)
</code></pre><p>The function accepts a strategy name <code>s_name</code> and an optional <code>keep_by</code> dictionary. If <code>keep_by</code> is provided, sessions matching these attributes (<code>ctx</code>, <code>params</code>, or <code>attrs</code>) are not deleted. It checks each session, and deletes it if it doesn&#39;t match <code>keep_by</code> or if <code>keep_by</code> is empty.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.extbayes!-Tuple{}" href="#Optim.extbayes!-Tuple{}"><code>Optim.extbayes!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Loads the BayesianOptimization extension.</p><p>The function checks if the BayesianOptimization package is installed in the current environment. If not, it prompts the user to add it to the main environment.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.filter_results-Tuple{Strategy, Any}" href="#Optim.filter_results-Tuple{Strategy, Any}"><code>Optim.filter_results</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Filters the optimization results based on certain criteria.</p><pre><code class="language-julia hljs">filter_results(::Strategy, sess; cut, min_results) -&gt; Any
</code></pre><p>The function takes a strategy and a session as input, along with optional parameters for cut and minimum results. It filters the results based on the cut value and the minimum number of results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.filtervecs-Union{Tuple{Array{Vector{T}, 1}}, Tuple{T}, Tuple{Array{Vector{T}, 1}, Function}} where T" href="#Optim.filtervecs-Union{Tuple{Array{Vector{T}, 1}}, Tuple{T}, Tuple{Array{Vector{T}, 1}, Function}} where T"><code>Optim.filtervecs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Filters a vector of vectors across dimension 2.</p><pre><code class="language-julia hljs">filtervecs(
    vov::Array{Array{T, 1}, 1};
    ...
) -&gt; Vector{Vector{Float64}}
filtervecs(
    vov::Array{Array{T, 1}, 1},
    filter_func::Function;
    default_val
) -&gt; Vector{Vector{Float64}}
</code></pre><p>This function takes a vector of vectors <code>vov</code> and a filter function <code>filter_func</code>. It iterates across dimension 2 (columns) and constructs a new vector of vectors where each element is a filtered list of the corresponding elements from the input vector of vectors.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">vov = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
filter_func = x -&gt; x &gt; 2
result = filtervecs(vov, filter_func)
# Result: [[3], [4, 5, 6], [7, 8, 9]]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.get_params" href="#Optim.get_params"><code>Optim.get_params</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Extracts parameter values from a specific row as a named tuple.</p><pre><code class="language-julia hljs">get_params(df::DataFrames.DataFrame) -&gt; NamedTuple
get_params(
    df::DataFrames.DataFrame,
    row_idx::Int64
) -&gt; NamedTuple
</code></pre><ul><li><code>df</code>: DataFrame containing aggregated results (from agg function)</li><li><code>row_idx</code>: Row index to extract parameters from (default: 1 for best result)</li></ul><p>Returns a named tuple with parameter names as keys and their values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.gridfromparams-Tuple{Any}" href="#Optim.gridfromparams-Tuple{Any}"><code>Optim.gridfromparams</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generates a grid from the provided parameters.</p><pre><code class="language-julia hljs">gridfromparams(params) -&gt; Any
</code></pre><p>The function takes a set of parameters as input. It generates a grid by taking the product of the parameters and reshaping it to the length of the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.gridfromresults-Tuple{OptSession, Any}" href="#Optim.gridfromresults-Tuple{OptSession, Any}"><code>Optim.gridfromresults</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generates a grid from the optimization results.</p><pre><code class="language-julia hljs">gridfromresults(sess::OptSession, results; kwargs...) -&gt; Any
</code></pre><p>The function takes an optimization session and results as input. It generates a grid by extracting the parameters from each row of the results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.gridpbar!-Tuple{Any, Any}" href="#Optim.gridpbar!-Tuple{Any, Any}"><code>Optim.gridpbar!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Initializes a progress bar for grid optimization.</p><pre><code class="language-julia hljs">gridpbar!(
    sess,
    first_params
) -&gt; Tuple{Base.RefValue, Tuple{Base.RefValue{Dates.DateTime}, Base.RefValue{Int64}, Base.RefValue{Int64}}}
</code></pre><p>This function sets up a progress bar for the grid optimization process. It creates a <code>ParamsColumn</code>, a <code>BestColumn</code>, and an <code>ETAColumn</code> and adds them to the default columns. The function returns a tuple of (current<em>params, eta</em>refs) where eta_refs contains the ETA column references.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.gridsearch-Tuple{SimStrategy}" href="#Optim.gridsearch-Tuple{SimStrategy}"><code>Optim.gridsearch</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Backtests the strategy across combination of parameters.</p><pre><code class="language-julia hljs">gridsearch(
    s::SimStrategy;
    seed,
    splits,
    n_jobs,
    save_freq,
    resume,
    logging,
    random_search,
    zi,
    grid_itr,
    offset,
    ctx
)
</code></pre><ul><li><code>seed</code>: random seed set before each backtest run.</li><li><code>splits</code>: the number segments into which the context is split.</li><li><code>save_freq</code>: how frequently (<code>Period</code>) to save results, when <code>nothing</code> (default) saving is skipped.</li><li><code>logging</code>: enabled logging</li><li><code>random_search</code>: shuffle parameters combinations before iterations</li></ul><p>One parameter combination runs <code>splits</code> times, where each run uses a period that is a segment of the full period of the given <code>Context</code> given. (The <code>Context</code> comes from the strategy <code>call!(s, params, OptRun())</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.isrunning-Tuple{}" href="#Optim.isrunning-Tuple{}"><code>Optim.isrunning</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Checks if the optimization process is currently running.</p><pre><code class="language-julia hljs">isrunning() -&gt; Bool
</code></pre><p>This function returns the <code>value</code> field of the <code>RUNNING</code> instance, indicating whether the optimization process is currently running.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.isthreadsafe-Tuple{Strategy}" href="#Optim.isthreadsafe-Tuple{Strategy}"><code>Optim.isthreadsafe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Tests if if the strategy is thread safe by looking up the <code>THREADSAFE</code> global. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.load_session" href="#Optim.load_session"><code>Optim.load_session</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Loads an optimization session from storage.</p><pre><code class="language-julia hljs">load_session(name; ...) -&gt; Any
load_session(name, startstop; ...) -&gt; Any
load_session(name, startstop, params_k; ...) -&gt; Any
load_session(
    name,
    startstop,
    params_k,
    code;
    as_z,
    results_only,
    s,
    zi
) -&gt; Any
</code></pre><p>This function loads an optimization session from the provided zarr instance <code>zi</code> based on the given parameters. The parameters include the strategy name, start and stop date of the backtesting context, the first letter of every parameter, and a hash of the parameters and attributes truncated to 4 characters. The function returns the loaded session, either as a zarr array if <code>as_z</code> is <code>true</code>, or as an <code>OptSession</code> object otherwise. If <code>results_only</code> is <code>true</code>, only the results DataFrame of the session is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.log_path" href="#Optim.log_path"><code>Optim.log_path</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generates the path for the log file of a given strategy.</p><pre><code class="language-julia hljs">log_path(s) -&gt; Tuple{Any, Any}
log_path(s, name) -&gt; Tuple{Any, Any}
</code></pre><p>The function takes a strategy <code>s</code> and an optional <code>name</code> (defaulting to the current timestamp). It constructs a directory path based on the strategy&#39;s path, and ensures this directory exists. Then, it returns the full path to the log file within this directory, along with the directory path itself.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.logs-Tuple{Any}" href="#Optim.logs-Tuple{Any}"><code>Optim.logs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the paths to all log files for a given strategy.</p><pre><code class="language-julia hljs">logs(s) -&gt; Any
</code></pre><p>The function takes a strategy <code>s</code> as an argument. It retrieves the directory path for the strategy&#39;s log files and returns the full paths to all log files within this directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.logs_clear-Tuple{Any}" href="#Optim.logs_clear-Tuple{Any}"><code>Optim.logs_clear</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Clears all log files for a given strategy.</p><pre><code class="language-julia hljs">logs_clear(s)
</code></pre><p>The function takes a strategy <code>s</code> as an argument. It retrieves the directory path for the strategy&#39;s log files and removes all files within this directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.lowerupper-Tuple{Any}" href="#Optim.lowerupper-Tuple{Any}"><code>Optim.lowerupper</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Extracts the lower and upper bounds from a parameters dictionary.</p><pre><code class="language-julia hljs">lowerupper(
    params
) -&gt; Tuple{Vector{Float64}, Vector{Float64}}
</code></pre><p>The function takes a parameters dictionary <code>params</code> as an argument. It returns two arrays, <code>lower</code> and <code>upper</code>, containing the first and last values of each parameter range in the dictionary, respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.metrics_func-Tuple{Any}" href="#Optim.metrics_func-Tuple{Any}"><code>Optim.metrics_func</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculates the metrics for a given strategy.</p><pre><code class="language-julia hljs">metrics_func(s; initial_cash)
</code></pre><p>The function takes a strategy <code>s</code> and an initial cash amount as arguments. It calculates the objective score, the current total cash, the profit and loss ratio, and the number of trades. The function returns these metrics as a named tuple.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.objectives-Tuple{Any}" href="#Optim.objectives-Tuple{Any}"><code>Optim.objectives</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the number of objectives and their type.</p><pre><code class="language-julia hljs">objectives(s)
</code></pre><p>The function takes a strategy <code>s</code> as an argument. It returns a tuple containing the type of the objective and the number of objectives.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.optimize-Tuple{SimStrategy}" href="#Optim.optimize-Tuple{SimStrategy}"><code>Optim.optimize</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Optimize parameters using the Optimization.jl framework.</p><pre><code class="language-julia hljs">optimize(
    s::SimStrategy;
    seed,
    splits,
    resume,
    save_freq,
    zi,
    maxiters,
    maxtime,
    opt_method,
    opt_method_kwargs,
    solve_method,
    solve_method_kwargs,
    split_test,
    multistart,
    n_jobs,
    early_threshold,
    max_failures,
    kwargs...
)
</code></pre><ul><li><code>splits</code>: how many times to run the backtest for each step</li><li><code>seed</code>: random seed</li><li><code>method</code>: optimization method (defaults to BBO<em>adaptive</em>de<em>rand</em>1_bin())</li><li><code>maxiters</code>: maximum number of iterations</li><li><code>maxtime</code>: maximum time budget for the optimization</li><li><code>kwargs</code>: The arguments to pass to the underlying Optimization.jl solve function.</li><li><code>parallel</code>: if true, enables parallel evaluation of multiple parameter combinations (default: false)</li><li><code>early_threshold</code>: if specified, terminates evaluation early if objective is below this threshold (default: -Inf)</li><li><code>max_failures</code>: maximum number of consecutive failures before stopping (default: Inf)</li></ul><p>From within your strategy, define three <code>call!</code> functions:</p><ul><li><code>call!(::Strategy, ::OptSetup)</code>: for the period of time to evaluate and the bounds for the optimization.</li><li><code>call!(::Strategy, params, ::OptRun)</code>: called before running the backtest, should apply the parameters to the strategy.</li></ul><div class="admonition is-warning" id="Warning-24648dc9c288762d"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-24648dc9c288762d" title="Permalink"></a></header><div class="admonition-body"><p>For compatibility between optimization methods and solvers read <a href="https://github.com/SciML/Optimization.jl">Optimization.jl</a> documentation carefully. Solvers that require auto differentiation might not work with your strategy.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Optimize all parameters
optimize(s)

# Exclude signal_lifetime and trade_cooldown from optimization
optimize(s)

# Exclude multiple parameters
optimize(s)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.optsession-Tuple{Strategy}" href="#Optim.optsession-Tuple{Strategy}"><code>Optim.optsession</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Removes results that don&#39;t have all the <code>repeat</code>ed evaluation.</p><pre><code class="language-julia hljs">optsession(s::Strategy; seed, splits, offset)
</code></pre><p>The function groups the results by session parameters and removes those groups that don&#39;t have a complete set of evaluations, as defined by the <code>splits</code> attribute of the session.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.optsessions-Tuple{String}" href="#Optim.optsessions-Tuple{String}"><code>Optim.optsessions</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the zarrays storing all the optimization session over the specified zarrinstance.</p><pre><code class="language-julia hljs">optsessions(
    s_name::String;
    zi
) -&gt; Union{Nothing, Dict{String, Zarr.ZArray}}
</code></pre><p>The function takes a strategy <code>s</code> as an argument. It retrieves the directory path for the strategy&#39;s log files and returns the full paths to all log files within this directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.print_log" href="#Optim.print_log"><code>Optim.print_log</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Prints the content of a specific log file for a given strategy.</p><pre><code class="language-julia hljs">print_log(s)
print_log(s, idx)
</code></pre><p>The function takes a strategy <code>s</code> and an optional index <code>idx</code> (defaulting to the last log file). It retrieves the directory path for the strategy&#39;s log files, selects the log file at the specified index, and prints its content.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.progsearch-Tuple{Any}" href="#Optim.progsearch-Tuple{Any}"><code>Optim.progsearch</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A progressive search performs multiple grid searches with only 1 repetition per parameters combination.</p><pre><code class="language-julia hljs">progsearch(s; sess, rounds, cut, kwargs...)
</code></pre><p>After each search is completed, the results are filtered according to custom rules. The parameters from the results that match the filtering will be backtested again with a different <code>offset</code> which modifies the backtesting period. <code>rounds</code>: how many iterations (of grid searches) to perform <code>sess</code>: If a <code>Ref{&lt;:OptSession&gt;</code> is provided, search will resume from the session previous results</p><p>Additional kwargs are forwarded to the grid search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.remove_incomplete!-Tuple{OptSession}" href="#Optim.remove_incomplete!-Tuple{OptSession}"><code>Optim.remove_incomplete!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Remove results that don&#39;t have all the <code>repeat</code>ed evalutaion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.result_params" href="#Optim.result_params"><code>Optim.result_params</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Fetches the named tuple of a single parameters combination.</p><pre><code class="language-julia hljs">result_params(
    sess::OptSession
) -&gt; Union{Nothing, NamedTuple}
result_params(
    sess::OptSession,
    idx
) -&gt; Union{Nothing, NamedTuple}
</code></pre><p>The function takes an optimization session <code>sess</code> and an optional index <code>idx</code> (defaulting to the last row of the results). It returns the parameters of the optimization session at the specified index as a named tuple.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.resume!-Tuple{Any}" href="#Optim.resume!-Tuple{Any}"><code>Optim.resume!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Resumes the optimization session from saved state.</p><pre><code class="language-julia hljs">resume!(sess; zi) -&gt; Bool
</code></pre><p>The function attempts to load a saved session and resumes it. If the saved session does not match the current session in terms of strategy, context, parameters, or attributes, an error is thrown. If the session is successfully resumed, the results from the saved session are appended to the current session&#39;s results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.rgx_key-Tuple{Any, Any, Any}" href="#Optim.rgx_key-Tuple{Any, Any, Any}"><code>Optim.rgx_key</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generates a regular expression for matching optimization session keys.</p><pre><code class="language-julia hljs">rgx_key(startstop, params_k, code) -&gt; Regex
</code></pre><p>The function takes three arguments: <code>startstop</code>, <code>params_k</code>, and <code>code</code>. These represent the start and stop date of the backtesting context, the first letter of every parameter, and a hash of the parameters and attributes truncated to 4 characters, respectively. The function returns a <code>Regex</code> object that matches the string representation of an optimization session key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.running!-Tuple{}" href="#Optim.running!-Tuple{}"><code>Optim.running!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Sets the running state of the optimization process to <code>true</code>.</p><pre><code class="language-julia hljs">running!() -&gt; Bool
</code></pre><p>This function changes the <code>value</code> field of the <code>RUNNING</code> instance to <code>true</code>, indicating that the optimization process is currently running.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.save_session-Tuple{OptSession}" href="#Optim.save_session-Tuple{OptSession}"><code>Optim.save_session</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Save the optimization session over the provided zarr instance</p><pre><code class="language-julia hljs">save_session(
    sess::OptSession;
    from,
    to,
    zi
) -&gt; Union{Nothing, Dict}
</code></pre><p><code>sess</code> is the <code>OptSession</code> to be saved. The <code>from</code> parameter specifies the starting index for saving optimization results progressively, while <code>to</code> specifies the ending index. The function uses the provided zarr instance <code>zi</code> for storage. The function first ensures that the zgroup for the strategy exists. Then, it writes various session attributes to zarr if we&#39;re starting from the beginning (<code>from == 0</code>). Finally, it saves the result data for the specified range (<code>from</code> to <code>to</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.select_balanced_params-Tuple{OptSession}" href="#Optim.select_balanced_params-Tuple{OptSession}"><code>Optim.select_balanced_params</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Selects parameter combinations that are both diverse and performant.</p><pre><code class="language-julia hljs">select_balanced_params(
    sess::OptSession;
    n,
    sort_by
) -&gt; DataFrames.DataFrame
</code></pre><ul><li><code>sess</code>: The optimization session containing results</li><li><code>n</code>: Number of parameter combinations to select (default: 10)</li><li><code>sort_by</code>: Column to sort by for performance (:pnl, :cash, :obj, default: :pnl)</li></ul><p>Returns a DataFrame with balanced diverse and performant parameter combinations that have at least 1 trade.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.select_best_params-Tuple{OptSession}" href="#Optim.select_best_params-Tuple{OptSession}"><code>Optim.select_best_params</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Selects parameter combinations with the best performance.</p><pre><code class="language-julia hljs">select_best_params(
    sess::OptSession;
    n,
    sort_by,
    ascending
) -&gt; DataFrames.DataFrame
</code></pre><ul><li><code>sess</code>: The optimization session containing results</li><li><code>n</code>: Number of parameter combinations to select (default: 10)</li><li><code>sort_by</code>: Column to sort by (:pnl, :cash, :obj, default: :pnl)</li><li><code>ascending</code>: Whether to sort in ascending order (default: false for best performance)</li></ul><p>Returns a DataFrame with the best performing parameter combinations that have at least 1 trade.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.select_diverse_params-Tuple{OptSession}" href="#Optim.select_diverse_params-Tuple{OptSession}"><code>Optim.select_diverse_params</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Selects the most different parameter combinations from optimization results.</p><pre><code class="language-julia hljs">select_diverse_params(
    sess::OptSession;
    n,
    metric
) -&gt; DataFrames.DataFrame
</code></pre><ul><li><code>sess</code>: The optimization session containing results</li><li><code>n</code>: Number of parameter combinations to select (default: 10)</li><li><code>metric</code>: Distance metric to use (:euclidean, :manhattan, :cosine, default: :euclidean)</li></ul><p>Returns a DataFrame with the most diverse parameter combinations that have at least 1 trade.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.session_key-Tuple{OptSession}" href="#Optim.session_key-Tuple{OptSession}"><code>Optim.session_key</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generates a unique key for an optimization session.</p><pre><code class="language-julia hljs">session_key(
    sess::OptSession
) -&gt; Tuple{Union{Base.AnnotatedString{String}, String}, NamedTuple{(:s_part, :ctx_part, :params_part, :config_part), &lt;:Tuple{Any, String, Union{Base.AnnotatedString{String}, String}, String}}}
</code></pre><p>This function generates a unique key for an optimization session by combining various parts of the session&#39;s properties. The key is a combination of the session&#39;s strategy name, context range, parameters, and a hash of the parameters and attributes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.setparams!-Tuple{Any, Any, Any}" href="#Optim.setparams!-Tuple{Any, Any, Any}"><code>Optim.setparams!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Override attributes in a strategy with values from a given parameters dictionary.</p><p>overrides!(s::AbstractStrategy, params::Dict, pidx::Dict) -&gt; AbstractStrategy</p><p>Override attributes in <code>s</code> with values from the <code>params</code> dictionary using the parameter index <code>pidx</code>. This is useful for updating strategy attributes during an optimization run.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.slidetest-Tuple{Strategy}" href="#Optim.slidetest-Tuple{Strategy}"><code>Optim.slidetest</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Backtests by sliding over the backtesting period, by the smallest timeframe (the strategy timeframe).</p><pre><code class="language-julia hljs">slidetest(s::Strategy; n_jobs, step_ratio, params)
</code></pre><p>Until a full range of timeframes is reached between the strategy timeframe and backtesting context timeframe.</p><ul><li><code>multiplier</code>: the steps count (total stepps will be <code>multiplier * context_timeframe / s.timeframe</code> )</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.stopcall!-Tuple{}" href="#Optim.stopcall!-Tuple{}"><code>Optim.stopcall!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Sets the running state of the optimization process to <code>false</code>.</p><pre><code class="language-julia hljs">stopcall!() -&gt; Bool
</code></pre><p>This function changes the <code>value</code> field of the <code>RUNNING</code> instance to <code>false</code>, indicating that the optimization process is not currently running.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.supports_parallel-Tuple{Strategy}" href="#Optim.supports_parallel-Tuple{Strategy}"><code>Optim.supports_parallel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Checks if a strategy supports parallel optimization.</p><pre><code class="language-julia hljs">supports_parallel(s::Strategy) -&gt; Any
</code></pre><p>This function checks if the strategy has the THREADSAFE flag set to true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.zgroup_opt-Tuple{Any}" href="#Optim.zgroup_opt-Tuple{Any}"><code>Optim.zgroup_opt</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Get the <code>Opt</code> group from the provided zarr instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.zgroup_strategy-Tuple{Any, String}" href="#Optim.zgroup_strategy-Tuple{Any, String}"><code>Optim.zgroup_strategy</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the zarr group for a given strategy.</p><pre><code class="language-julia hljs">zgroup_strategy(
    zi,
    s_name::String
) -&gt; NamedTuple{(:s_group, :opt_group), &lt;:Tuple{Zarr.ZGroup, Union{Zarr.ZArray, Zarr.ZGroup}}}
</code></pre><p>This function checks if a zarr group exists for the given strategy name in the optimization group of the zarr instance. If it exists, the function returns the group; otherwise, it creates a new zarr group for the strategy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Optim.@optimize-Tuple{Any, Vararg{Any}}" href="#Optim.@optimize-Tuple{Any, Vararg{Any}}"><code>Optim.@optimize</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@optimize strategy [options...]</code></pre><p>Macro for optimizing strategy parameters using Optimization.jl framework.</p><p><strong>Arguments</strong></p><ul><li><code>strategy</code>: The strategy to optimize</li><li><code>options</code>: Optional keyword arguments for the optimization</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">@optimize my_strategy maxiters=500
@optimize my_strategy method=BBO_adaptive_de_rand_1_bin() maxiters=1000</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BubbleParticles/Planar.jl">source</a></section></article><h2 id="See-Also"><a class="docs-heading-anchor" href="#See-Also">See Also</a><a id="See-Also-1"></a><a class="docs-heading-anchor-permalink" href="#See-Also" title="Permalink"></a></h2><ul><li><strong><a href="../../optimization/">Optimization</a></strong> - Performance optimization techniques</li><li><strong><a href="../../troubleshooting/performance-issues/">Performance Issues</a></strong> - Troubleshooting: Performance optimization techniques</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../misc/">« Miscellaneous</a><a class="docs-footer-nextpage" href="../pbar/">Progress Bars »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Sunday 26 October 2025 00:50">Sunday 26 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
